<!-- {# templates/components/questions/_panel_subjects.html #} -->
<div class="card-soft p-3">
  <div class="qb-title subjects mb-3">
    <span class="accent"></span>
    <h5 class="m-0">Subjects</h5>
  </div>

  {% if subjects %}
    <div class="list-group list-group-flush small">
      {% for s in subjects %}
        {% if source == "exams" %}
          <button class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                  hx-get="{% url 'q_panel_parts' %}?module_id={{ module_id }}&subject_id={{ s.id }}&source=exams"
                  hx-target="#q-main-panel" hx-swap="innerHTML" hx-indicator="#q-loading">
            <span>{{ s.name }}</span><span class="badge qb-badge">open</span>
          </button>
        {% elif source == "old" %}
          {% if kind == "final" %}
            <button class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                    hx-get="{% url 'q_panel_parts' %}?module_id={{ module_id }}&subject_id={{ s.id }}&source=old&kind=final&exam_year={{ exam_year }}"
                    hx-target="#q-main-panel" hx-swap="innerHTML" hx-indicator="#q-loading">
              <span>{{ s.name }}</span><span class="badge qb-badge">open</span>
            </button>
          {% else %}
            <button class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                    hx-get="{% url 'q_panel_questions' %}?subject_id={{ s.id }}&source=old&kind={{ kind }}&exam_year={{ exam_year }}"
                    hx-target="#q-main-panel" hx-swap="innerHTML" hx-indicator="#q-loading">
              <span>{{ s.name }}</span><span class="badge qb-badge">questions</span>
            </button>
          {% endif %}
        {% elif source == "exam_review" %}
          {% if kind == "final" %}
            <button class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                    hx-get="{% url 'q_panel_parts' %}?subject_id={{ s.id }}&source=exam_review&kind=final&exam_year={{ exam_year }}"
                    hx-target="#q-main-panel" hx-swap="innerHTML" hx-indicator="#q-loading">
              <span>{{ s.name }}</span><span class="badge qb-badge">open</span>
            </button>
          {% else %}
            <button class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                    hx-get="{% url 'q_panel_chapters' %}?subject_id={{ s.id }}&source=exam_review&kind={{ kind }}&exam_year={{ exam_year }}"
                    hx-target="#q-main-panel" hx-swap="innerHTML" hx-indicator="#q-loading">
              <span>{{ s.name }}</span><span class="badge qb-badge">open</span>
            </button>
          {% endif %}
        {% else %}
          <div class="list-group-item">{{ s.name }}</div>
        {% endif %}
      {% endfor %}
    </div>
  {% else %}
    <p class="text-muted mb-0">No subjects.</p>
  {% endif %}
</div>
